version: "3.9"
services:
  app:
    container_name: grocery
    build:
      context: .
      dockerfile: containers/app/Dockerfile
    ports:
      - 3700:3700
    depends_on:
      - mysql_server 
    volumes:
      - .:/usr/src/app
      - /usr/src/app/node_modules
    environment:
      NODE_ENV: development
      # MYSQL_HOST: database
    # networks:
    #   grocery_network:

  mysql_server:  # <- ;)
    container_name: grocerydb
    image: mysql:8.0
    # platform: linux/amd64
    # command: --default-authentication-plugin=mysql_native_password
    # restart: always
    # env_file:  # <-- we use the previously defined values
    #  - containers/db/database.env  
    # volumes:
    #  - database_volume:/var/lib/mysql 
    environment: 
      - MYSQL_DATABASE=grocery
      - MYSQL_USER=MoralexCode
      - MYSQL_PASSWORD=s3cr3t
      - MYSQL_ROOT_PASSWORD=s3cr3t
    # networks:
    #   grocery_network:
 

# volumes:
#   database_volume:
# networks:
#   grocery_network: